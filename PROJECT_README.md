# コアクラス画像分類・整理アプリ

AI技術を使用してコンクリート杭、プラスチック杭、プレート、金属鋲の画像を自動分類し、フォルダ別に整理するGUIアプリケーションです。

## 🚀 主な機能

- **自動画像分類**: 4つのコアクラス（plastic, plate, byou, concrete）への自動分類
- **バッチ処理**: 大量の画像を一括処理
- **ファイル整理**: 分類結果に基づいてフォルダ分けとリネーム
- **信頼度設定**: 分類精度の閾値を調整可能
- **プレビュー機能**: 処理前に分類結果を確認
- **処理統計**: 分類結果の詳細レポート

## 📋 必要な環境

- **Python**: 3.8以上
- **OS**: Windows 10/11
- **メモリ**: 4GB以上推奨
- **ストレージ**: 2GB以上の空き容量

## 🔧 セットアップ方法

### 1. プロジェクトのコピー
以下のファイルとフォルダを新しいフォルダにコピーしてください：

```
your-project-folder/
├── core_classifier_organizer.py    # メインアプリケーション
├── start_app.bat                   # 起動スクリプト
├── setup.bat                       # セットアップスクリプト
├── requirements.txt                # Python依存関係
├── README.md                       # このファイル
└── models/                         # 訓練済みモデルフォルダ
    ├── pile_classifier.h5          # メインモデル
    ├── model_info.json             # モデル情報
    └── core_model_info.json        # 追加モデル情報（オプション）
```

### 2. 自動セットアップ
```bash
setup.bat
```
これにより以下が自動実行されます：
- Python環境確認
- 仮想環境作成
- 必要パッケージインストール
- TensorFlow動作確認

### 3. アプリケーション起動
```bash
start_app.bat
```

## 📖 使用方法

### 基本操作
1. **start_app.bat**をダブルクリックしてアプリを起動
2. **分類対象フォルダ**で処理したい画像があるフォルダを選択
3. **整理先フォルダ**で分類結果を保存するフォルダを選択
4. **信頼度閾値**を調整（デフォルト: 0.8）
5. **プレビュー**ボタンで動作確認（推奨）
6. **分類・整理実行**ボタンで処理開始

### 対応画像形式
- `.jpg`, `.jpeg`
- `.png`  
- `.bmp`
- `.tiff`

### 分類カテゴリ
- **plastic**: プラスチック杭 (ファイル名プレフィックス: P)
- **plate**: プレート (ファイル名プレフィックス: PL)  
- **byou**: 金属鋲 (ファイル名プレフィックス: B)
- **concrete**: コンクリート杭 (ファイル名プレフィックス: C)

## ⚙️ 設定オプション

- **信頼度閾値**: 0.5-1.0（高い値ほど厳密な分類）
- **バックアップ作成**: 処理前に元画像のバックアップを自動作成
- **ファイル名プレフィックス**: 杭種コードの自動追加
- **コピーモード**: 元ファイルを残してコピーで処理

## 🔍 トラブルシューティング

### よくある問題

**Q: "TensorFlowが利用できません" エラー**
A: setup.batを実行して環境を再セットアップしてください。

**Q: モデルファイルが見つからない**  
A: modelsフォルダに以下のファイルがあることを確認：
   - pile_classifier.h5
   - model_info.json

**Q: 画像が処理されない**
A: 対応形式の画像ファイルが入力フォルダにあることを確認してください。

**Q: 分類精度が低い**
A: 信頼度閾値を0.6-0.7に下げるか、より多くの訓練データでモデルを再訓練してください。

### ログの確認
アプリ下部の「処理ログ」エリアで詳細な実行状況を確認できます。

## 📂 プロジェクト構造

```
project/
├── core_classifier_organizer.py    # メインアプリケーション
├── start_app.bat                   # 起動スクリプト  
├── setup.bat                       # 環境セットアップ
├── requirements.txt                # 依存関係定義
├── README.md                       # プロジェクト説明
├── .venv/                          # Python仮想環境（自動作成）
└── models/                         # AIモデル
    ├── pile_classifier.h5          # 訓練済みモデル
    └── model_info.json             # モデル設定
```

## 🛠️ 技術仕様

- **フレームワーク**: TensorFlow/Keras
- **ベースモデル**: MobileNetV2
- **入力サイズ**: 640x640 RGB
- **出力**: 4クラス分類
- **GUI**: Python tkinter

## 📄 ライセンス

このプロジェクトは教育・研究目的で作成されています。

## 📞 サポート

問題が発生した場合は、処理ログの内容と合わせてお問い合わせください。